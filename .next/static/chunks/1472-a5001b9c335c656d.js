"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1472],{285:(e,t,r)=>{r.d(t,{$:()=>l,r:()=>s});var a=r(5155);r(2115);var n=r(9708),o=r(2085),i=r(9434);let s=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:o,asChild:l=!1,...d}=e,c=l?n.Slot:"button";return(0,a.jsx)(c,{"data-slot":"button",className:(0,i.cn)(s({variant:r,size:o,className:t})),...d})}},1472:(e,t,r)=>{r.d(t,{A:()=>y});var a=r(5155),n=r(285),o=r(6695),i=r(2432),s=r(6061),l=r(5196),d=r(7809);r(2115);var c=r(9613),p=r(9434);function m(e){let{delayDuration:t=0,...r}=e;return(0,a.jsx)(c.Kq,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function u(e){let{...t}=e;return(0,a.jsx)(m,{children:(0,a.jsx)(c.bL,{"data-slot":"tooltip",...t})})}function h(e){let{...t}=e;return(0,a.jsx)(c.l9,{"data-slot":"tooltip-trigger",...t})}function f(e){let{className:t,sideOffset:r=0,children:n,...o}=e;return(0,a.jsx)(c.ZL,{children:(0,a.jsxs)(c.UC,{"data-slot":"tooltip-content",sideOffset:r,className:(0,p.cn)("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...o,children:[n,(0,a.jsx)(c.i3,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function y(e){let{id:t,name:r,description:c,price:p,image:y,stock:v}=e,{state:g,addItem:x}=(0,i._)(),b=g.items.some(e=>e.id===t);return(0,a.jsxs)(o.Zp,{className:"overflow-hidden h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"aspect-square relative",children:[(0,a.jsx)("img",{src:y,alt:r,className:"object-cover w-full h-full transition-transform duration-300 hover:scale-105"}),v<=5&&v>0&&(0,a.jsxs)("span",{className:"absolute top-2 right-2 bg-yellow-500 text-white px-2 py-1 rounded-full text-xs",children:["Chỉ c\xf2n ",v]}),0===v&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-medium",children:"Hết h\xe0ng"})})]}),(0,a.jsxs)("div",{className:"p-4 flex-1 flex flex-col",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2 flex-1",children:r}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:c}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-auto",children:[(0,a.jsx)("span",{className:"font-bold text-lg",children:(0,s.vv)(p)}),(0,a.jsx)(m,{children:(0,a.jsxs)(u,{children:[(0,a.jsx)(h,{asChild:!0,children:(0,a.jsx)(n.$,{onClick:()=>{b||x({id:t,name:r,price:p,quantity:1,image:y})},disabled:b||0===v,variant:b?"secondary":"default",size:"sm",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Đ\xe3 th\xeam"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.A,{className:"h-4 w-4 mr-2"}),"Th\xeam v\xe0o giỏ"]})})}),(0,a.jsx)(f,{children:b?"Sản phẩm đ\xe3 c\xf3 trong giỏ h\xe0ng":0===v?"Sản phẩm đ\xe3 hết h\xe0ng":"Th\xeam v\xe0o giỏ h\xe0ng"})]})})]})]})]})}},2432:(e,t,r)=>{r.d(t,{_:()=>l,e:()=>s});var a=r(5155),n=r(2115);let o=(0,n.createContext)(null);function i(e,t){switch(t.type){case"ADD_ITEM":if(e.items.find(e=>e.id===t.payload.id))return{...e,items:e.items.map(e=>e.id===t.payload.id?{...e,quantity:e.quantity+1}:e),total:e.total+t.payload.price};return{...e,items:[...e.items,t.payload],total:e.total+t.payload.price};case"REMOVE_ITEM":{let r=e.items.find(e=>e.id===t.payload);if(!r)return e;return{...e,items:e.items.filter(e=>e.id!==t.payload),total:e.total-r.price*r.quantity}}case"UPDATE_QUANTITY":{let r=e.items.find(e=>e.id===t.payload.id);if(!r)return e;let a=t.payload.quantity-r.quantity;return{...e,items:e.items.map(e=>e.id===t.payload.id?{...e,quantity:t.payload.quantity}:e),total:e.total+r.price*a}}case"CLEAR_CART":return{items:[],total:0};default:return e}}function s(e){let{children:t}=e,[r,s]=(0,n.useReducer)(i,{items:[],total:0});return(0,n.useEffect)(()=>{let e=localStorage.getItem("cart");if(e){let{items:t,total:r}=JSON.parse(e);s({type:"CLEAR_CART"}),t.forEach(e=>{s({type:"ADD_ITEM",payload:e})})}},[]),(0,n.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(r))},[r]),(0,a.jsx)(o.Provider,{value:{state:r,addItem:e=>{s({type:"ADD_ITEM",payload:e})},removeItem:e=>{s({type:"REMOVE_ITEM",payload:e})},updateQuantity:(e,t)=>{s({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{s({type:"CLEAR_CART"})}},children:t})}function l(){let e=(0,n.useContext)(o);if(!e)throw Error("useCart must be used within a CartProvider");return e}},6061:(e,t,r)=>{r.d(t,{KF:()=>l,vv:()=>c,wh:()=>d});var a=r(9509);let n={momo:{partnerCode:a.env.NEXT_PUBLIC_MOMO_PARTNER_CODE||"",accessKey:a.env.NEXT_PUBLIC_MOMO_ACCESS_KEY||"",secretKey:a.env.MOMO_SECRET_KEY||"",endpoint:"https://test-payment.momo.vn/v2/gateway/api/create"},vnpay:{tmnCode:a.env.NEXT_PUBLIC_VNPAY_TMN_CODE||"",hashSecret:a.env.VNPAY_HASH_SECRET||"",endpoint:"https://sandbox.vnpayment.vn/paymentv2/vpcpay.html"},stripe:{publishableKey:a.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY||"",secretKey:a.env.STRIPE_SECRET_KEY||""}};async function o(e){let{orderId:t,amount:r,description:a,returnUrl:o}=e,i="".concat(t,"_").concat(Date.now()),s=n.momo.partnerCode,l=n.momo.accessKey;try{let e=await fetch(n.momo.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({partnerCode:s,accessKey:l,requestId:i,amount:r,orderId:t,orderInfo:a,returnUrl:o,notifyUrl:"https://your-server.com/api/momo/callback",requestType:"captureMoMoWallet",signature:"DUMMY_SIGNATURE",extraData:""})}),d=await e.json();if(0!==d.errorCode)throw Error(d.message);window.location.href=d.payUrl}catch(e){throw console.error("MoMo payment error:",e),Error("Kh\xf4ng thể tạo thanh to\xe1n MoMo")}}async function i(e){let{orderId:t,amount:r,description:a,returnUrl:o}=e,i=new Date().toISOString(),s=new URLSearchParams({vnp_Version:"2.1.0",vnp_Command:"pay",vnp_TmnCode:n.vnpay.tmnCode,vnp_Amount:(100*r).toString(),vnp_CreateDate:i,vnp_CurrCode:"VND",vnp_IpAddr:"127.0.0.1",vnp_Locale:"vn",vnp_OrderInfo:a,vnp_OrderType:"billpayment",vnp_ReturnUrl:o,vnp_TxnRef:t});s.append("vnp_SecureHash","DUMMY_HASH");let l="".concat(n.vnpay.endpoint,"?").concat(s.toString());window.location.href=l}async function s(e){let{amount:t,description:r}=e;try{let e=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,description:r})}),a=await e.json();if(!a.clientSecret)throw Error("Failed to create payment intent");return a.clientSecret}catch(e){throw console.error("Stripe payment error:",e),Error("Kh\xf4ng thể tạo thanh to\xe1n Stripe")}}async function l(e,t){try{let r=await fetch("/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:Object.fromEntries(e),method:t})}),a=await r.json();if(!a.success)throw Error(a.message||"Payment verification failed");return a}catch(e){throw console.error("Payment verification error:",e),Error("Kh\xf4ng thể x\xe1c minh thanh to\xe1n")}}async function d(e){let{method:t,data:r}=e;switch(t){case"momo":return o(r);case"vnpay":return i(r);case"stripe":return s(r);default:throw Error("Phương thức thanh to\xe1n kh\xf4ng hợp lệ")}}function c(e){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e)}},6695:(e,t,r)=>{r.d(t,{Zp:()=>o});var a=r(5155);r(2115);var n=r(9434);function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,n.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}},9434:(e,t,r)=>{r.d(t,{CM:()=>i,cn:()=>o});var a=r(2596),n=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,a.$)(t))}let i=[{id:"food",name:"Thức ăn"},{id:"accessories",name:"Phụ kiện"},{id:"grooming",name:"Chăm s\xf3c"},{id:"toys",name:"Đồ chơi"}]}}]);